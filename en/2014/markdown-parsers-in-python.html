<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>Markdown Parsers in Python â€” Just lepture</title>
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152.png">
  <link rel="logo" type="image/svg" href="/logo.svg">
  <link rel="dns-prefetch" href="http://dn-lepture.qbox.me">
  <link rel="alternate" type="application/atom+xml" title="Subscribe Feed" href="http://feeds.lepture.com/lepture">
  <meta name="google-site-verification" content="at2ye66Rzr0dthIDpBZfL4nUZWPBS336jT9NUHaLSHM" />
<meta class="swiftype" name="title" data-type="string" content="Markdown Parsers in Python">
<meta property="og:type" content="article">
<meta property="og:title" content="Markdown Parsers in Python">
<meta property="og:url" content="http://lepture.com/en/2014/markdown-parsers-in-python">
  <meta name="description" content="A list of all markdown parsers in Python. The advantages and
disadvantages of them.">
  <meta property="og:description" content="A list of all markdown parsers in Python. The advantages and
disadvantages of them.">
  <meta property="og:image" content="/apple-touch-icon-152.png">
  <meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@lepture">
<meta name="twitter:creator" content="@lepture">
<meta name="twitter:domain" content="lepture.com">
<meta property="og:site_name" content="Just lepture">
  <meta property="og:locale" content="en_US">
<link rel="canonical" href="http://lepture.com/en/2014/markdown-parsers-in-python">  <link rel="stylesheet" href="/assets/site.css?t=1461769283">
  <link rel="stylesheet" href="/assets/font.css?t=1461769283">
  <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-21475122-1');
(function(){
    var title="Markdown Parsers in Python";
  ga('send', 'pageview', {
    page: location.pathname,
    location: location.href,
    title: title,
  });
})();</script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2876535761076599",
          enable_page_level_ads: true
      });
  </script>
</head>
<body>
  <header id="header">
    <div class="container yue">
      <a id="brand" href="/">
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="24px" height="24px" viewBox="0 0 240 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M156.613464,113.999999 L235.90968,113.999965 C233.495105,53.9540791 182.972141,6 121,6 C57.4872506,6 6,56.3679626 6,118.5 C6,180.632037 57.4872506,231 121,231 C182.627716,231 232.933165,183.577472 235.86497,124.000065 L235.864973,124 L156.613465,124 C154.053154,140.407155 139.083693,153 121,153 C101.117748,153 85,137.777682 85,119 C85,100.222318 101.117748,85 121,85 C139.083692,85 154.053154,97.5928448 156.613464,113.999999 Z" id="Oval-1" fill="#000000"></path>
    </g>
</svg>        <strong>Just lepture</strong>
      </a>
      <nav id="nav">
          <a href="/about">About</a>
          <a href="/zh/">Chinese</a>
          <a href="/en/">English</a>
      </nav>
    </div>
  </header>
    <article id="main" role="main" class="hentry yue" itemscope itemtype="http://schema.org/Article">
<div class="entry-header">
  <div class="container">
    <h1 class="entry-title" itemprop="name">Markdown Parsers in Python</h1>
    <p class="entry-description" itemprop="headline">A list of all markdown parsers in Python. The advantages and
disadvantages of them.</p>

    <div class="entry-meta">
        <time class="updated" datetime="2014-02-26T16:55:00+08:00" itemprop="datePublished" pubdate>
          Feb 26, 2014
        </time>
        <span>1376 words</span>

        <a class="button" rel="nofollow" href="https://github.com/lepture/mistune">GitHub</a>
    </div>
  </div>
</div>
  <div class="entry-content container" itemprop="articleBody">
    <p>There are many markdown parsers in Python. Misaka was my favorite one.
However, misaka is deprecated now, and the successor which is called
hoedown still has issues to solve. That's why it is a <strong>was</strong>. But I still
love it.</p>
<p>Here is a list of markdown parsers for Python in my knowledge:</p>
<ul>
<li>Misaka: A python binding for Sundown. (CPython required)</li>
<li>Hoedown: A python binding for Hoedown, successor of Misaka.</li>
<li>Discount: A python binding for Discount. (CPython required)</li>
<li>cMarkdown: Markdown for Python, accelerated by C. (CPython required)</li>
<li>Markdown: A pure markdown parser, the very first implementation.</li>
<li>Markdown2: Another pure markdown parser.</li>
</ul>
<p>And I've just released another pure markdown parser too, which is called
<strong><a href="https://github.com/lepture/mistune">mistune</a></strong>.</p>
<h2>Misaka</h2>
<p><a href="https://github.com/FSX/misaka">Misaka</a> was my favorite markdown parser. It
is a python binding of Sundown, which means that it has all the features
that Sundown provides.</p>
<p>It is super fast! Actually, it is the top one in my benchmarks. Since it is
a binding of a C library, no wonder that it is this fast. If speed is what
you want, you should try misaka, and as well as other bindings of a C library.</p>
<p>But misaka is more than speed. It is the custom renderer feature that catches
my heart. I am so fond of it, that's why I implement the custom renderer
feature in my own markdown parser <strong>mistune</strong>.</p>
<p>A quick and very useful sample is <a href="http://misaka.61924.nl/manual/#toc_15">code highlighting</a>.</p>
<p>However, it is a binding of a C libary. It requires CPython, if you prefer
PyPy, you have no access to it. Some App Engines have a limitation on compiling
C libraries too, you can't use misaka in this case. And even if you are
using CPython, it is still difficult to install it on a Windows OS.</p>
<blockquote><p>Visual Studio's support for C is not optimal and most VS compilers are
missing stdint.h, which is needed to compile Misaka.</p>
</blockquote><p>If you are on a Windows, may god helps you. I don't care it a shit.</p>
<p>Footnote feature is missing in Misaka. Maybe many of you don't need such a
thing, in this case, misaka has nothing bad. It is stable, efficient, and
has many GFM features.</p>
<p>The only trouble is Sundown is deprecated.<sup class="footnote-ref" id="fnref-sundown-deprecated"><a href="#fn-sundown-deprecated" rel="footnote">1</a></sup></p>
<h2>Hoedown</h2>
<p>Because the Sundown library is deprecated, here comes hoedown<sup class="footnote-ref" id="fnref-c-hoedown"><a href="#fn-c-hoedown" rel="footnote">2</a></sup>,
which is the fork of the original Sundown. It has a Python binding also
called as hoedown.</p>
<p>Since Hoedown is the successor of Sundown, and <a href="https://github.com/hhatto/python-hoedown">python-hoedown</a> is the successor of Misaka, all features
that misaka has, python-hoedown has them too. But python-hoedown is more
than that.</p>
<ol>
<li>It is PyPy compatible.</li>
<li>It has footnote feature.</li>
</ol>
<p>It looks promissing, and even misaka's author recommends it. I've tried it,
but failed with one issue, <a href="https://github.com/hhatto/python-hoedown/issues/5">a magic error</a> that I can't do anything:</p>
<pre><code>terminated by signal SIGSEGV (Address boundary error)</code></pre>
<p>This isssue is not fixed yet. Once it does, <del>hoedown would be a good choice</del>
for non-AE users.</p>
<p><em>Updated at Jun 23, 2014</em>: you can use <a href="https://github.com/Anomareh/Hoep">Hoep</a> as the Python Binding.</p>
<h2>cMarkdown &amp; Discount</h2>
<p><a href="https://github.com/paulsmith/cMarkdown">cMarkdown</a> is much like Misaka,
except that it is based on upskirt<sup class="footnote-ref" id="fnref-upskirt"><a href="#fn-upskirt" rel="footnote">3</a></sup> rather than sundown. The
history is very interesting, sundown is a fork of upskirt, hoedown is a
fork of sundown. And now, sundown is deprecated, upskirt is missing. The
new markdown parser that vmg promised is still not available.</p>
<p>cMarkdown has all the disadvantages of Misaka, and it is a little slower
than Misaka. This means you really should use misaka instead of cMarkdown.</p>
<hr>
<p>Discount is a joke for me, I can't even install it successfully! There is
not much to say. But I do know that Discount is slower than Sundown.</p>
<h2>Markdown &amp; Markdown2</h2>
<p><a href="https://github.com/waylan/Python-Markdown">Python-Markdown</a> is the very first markdown parser in pure Python. It is
good, except the documentation. However, I miss the renderer feature in
misaka, which is not in Python-Markdown.</p>
<p>Python-Markdown is not that slow as I expected, since Python-Markdown2
calls itself as:</p>
<blockquote><p>A fast and complete implementation of Markdown in Python.</p>
</blockquote><p>But it is not true. Python-Markdown2 is much slower than Python-Markdown.
I have no idea why it says itself fast. All features that 2 has, the older
one has too.</p>
<p>The benchmark shows that Python-Markdown2 is almost twice slower than
Python-Markdown. No wonder it is 2.</p>
<h2>Mistune</h2>
<p><a href="https://github.com/lepture/mistune">Mistune</a> is a new (just released)
markdown parser. It is the <strong>fastest</strong> one in all pure Python implementations.
Almost <strong>4 times faster</strong><sup class="footnote-ref" id="fnref-bench"><a href="#fn-bench" rel="footnote">4</a></sup> than Python-Markdown in pure Python
environment, almost <strong>5 times faster</strong> with Cython's help.</p>
<p>I didn't expect it to be so fast when I wrote it. I know it would be a fast
one, but I didn't know that it would be 4 times faster and even 5 times
faster.</p>
<hr>
<p>I have never thought of creating a Markdown parser my own. But it has been
months since I reported the issue to Hoedown. The issue is still there,
not solved a bit. Because it is a C binding, I am not able to do any help,
the only thing I can do is waiting.</p>
<p>I don't use Python-Markdown or Python-Markdown2, because they have no renderer
feature, and they are slow.</p>
<p>I have <a href="/en/2013/unpleasant-open-source">introduced renderer feature to marked</a>, which is
finally merged. And now I am trying to add the <a href="https://github.com/chjj/marked/pull/351">footnote feature</a>.
It occured to me that I can port marked to Python, since I know marked well,
and I know it is the fastest in all pure JavaScript implementations. It
would be fast in Python too, and it really does.</p>
<hr>
<p>If you are looking for a fast, full featured<sup class="footnote-ref" id="fnref-mistune-features"><a href="#fn-mistune-features" rel="footnote">5</a></sup> and pure
Python implementation, Mistune is a good choice. It also has renderer
feature just like Misaka. You can always influnce the rendering results
with custom renderers.</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mistune</span>
<span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">get_lexer_by_name</span>
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="k">class</span> <span class="nc">MyRenderer</span><span class="p">(</span><span class="n">mistune</span><span class="o">.</span><span class="n">Renderer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">block_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lang</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&lt;pre&gt;&lt;code&gt;</span><span class="si">%s</span><span class="s1">&lt;/code&gt;&lt;/pre&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> \
                <span class="n">mistune</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="n">lang</span><span class="p">,</span> <span class="n">stripall</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>

<span class="n">renderer</span> <span class="o">=</span> <span class="n">MyRenderer</span><span class="p">()</span>
<span class="n">md</span> <span class="o">=</span> <span class="n">mistune</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s1">&#39;Some Markdown text.&#39;</span><span class="p">))</span>
</pre></div>
<h2>Additional Notes</h2>
<p>I did a benchmark on my MacBook Air, <a href="https://github.com/lepture/mistune/issues/1">view the results</a>.
You can run the benchmark script yourself: <a href="https://github.com/lepture/mistune/blob/master/tests/bench.py">bench.py</a></p>
<pre><code>Parsing the Markdown Syntax document 1000 times...
Mistune: 12.7255s
Mistune (with Cython): 9.74075s
Misaka: 0.550502s
Markdown: 46.4342s
Markdown2: 78.2267s
cMarkdown: 0.664128s
Discount is not available</code></pre>
<hr>
<p>Mistune can be compiled with Cython if you have Cython installed already.</p>
<pre><code>$ pip install cython mistune</code></pre>
<p>The magic happens in the <code>setup.py</code> script. I'd like to introduce this part
another time.</p>
<p><strong>mistune is used by many great projects such as IPython, Rodeo and crossbar.</strong></p>
<p><em>This post and all posts in markdown format on this site are rendered with
mistune.</em></p>
<div class="footnotes">
<hr>
<ol><li id="fn-sundown-deprecated"><p>Sundown is deprecated a year ago with a <a href="https://github.com/vmg/sundown/commit/37728fb2d7137ff7c37d0a474cb827a8d6d846d8">commit</a> by vmg, but the new markdown parser is still missing.<a href="#fnref-sundown-deprecated" rev="footnote">&#8617;</a></p></li>
<li id="fn-c-hoedown"><p>Hoedown is a fork of Sundown, it is a C library. It reverted the <a href="https://github.com/hoedown/hoedown/commit/aa43a77283c613662033039eddb477f2e0fd3d63">deprecated message</a> 5 months ago.<a href="#fnref-c-hoedown" rev="footnote">&#8617;</a></p></li>
<li id="fn-upskirt"><p>Links about upskirt are missing now, they are all 404.<a href="#fnref-upskirt" rev="footnote">&#8617;</a></p></li>
<li id="fn-bench"><p>I've did a benchmark on all markdown parsers I know. <a href="https://github.com/lepture/mistune/issues/1">Checkout the Benchmarks</a>.<a href="#fnref-bench" rev="footnote">&#8617;</a></p></li>
<li id="fn-mistune-features"><p>Mistune is full featured, it has autolink, strikethrough, table,
fenced code, footnotes. And you can't disable them. I believe that
it is a good design to enable all these features, since they are the
standards in the real world now.<a href="#fnref-mistune-features" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

  </div>

    <span class="author vcard hide">
      <span class="fn" itemprop="author">Hsiaoming Yang</span>
    </span>
  </div>

  <div class="entry-extra container">
    <div class="entry-tags">
      <a class="tag" href="/archive#python">python</a>
      <a class="tag" href="/archive#markdown">markdown</a>
    </div>
  </div>

</article>

  <script>
    var images = document.getElementsByTagName('img');
    if (images.length) {
      for (var i = 0; i < images.length; i++) {
        var src = images[i].getAttribute('data-src');
        if (src) images[i].src = src;
      }
    }
  </script>
<div class="entry-comments yue">
  <div id="disqus_thread" class="container"></div>
</div>
<script>
    var disqus_shortname='lepture';
    var disqus_title='Markdown Parsers in Python';
    var disqus_url='http://lepture.com/en/2014/markdown-parsers-in-python';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <footer id="footer">
    <div class="container">
      <p>&copy; Copyright 2010 - 2016 by Hsiaoming Yang.</p>
    </div>
  </footer>
</body>
</html>